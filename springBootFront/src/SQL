DROP TABLE BBS;

DROP SEQUENCE SEQ_BBS;

CREATE TABLE BBS(
    SEQ NUMBER(8) PRIMARY KEY,
    ID VARCHAR2(50) NOT NULL,    
    REF NUMBER(8) NOT NULL,
    STEP NUMBER(8) NOT NULL,
    DEPTH NUMBER(8) NOT NULL,    
    TITLE VARCHAR2(200) NOT NULL,
    CONTENT VARCHAR2(4000) NOT NULL,
    WDATE DATE NOT NULL,    
    DEL NUMBER(1) NOT NULL,
    READCOUNT NUMBER(8) NOT NULL
);

CREATE SEQUENCE SEQ_BBS
START WITH 1 INCREMENT BY 1;

ALTER TABLE BBS
ADD CONSTRAINT FK_BBS_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);

INSERT INTO BBS(SEQ, ID, REF, STEP, DEPTH, TITLE, CONTENT, WDATE, DEL, READCOUNT) 
VALUES(SEQ_BBS.NEXTVAL, 'aaa', (SELECT NVL(MAX(REF)+1,0) FROM BBS), 0, 0, '첫번째 글입니다.', '내용입니다.', SYSDATE, 0, 0);

DROP TABLE COMMENTS;

DROP SEQUENCE SEQ_COMMENTS;

CREATE TABLE COMMENTS(
	SEQ NUMBER(8) NOT NULL,
    ID VARCHAR2(50) NOT NULL,  
    CONTENT VARCHAR2(4000) NOT NULL,
    WDATE DATE NOT NULL    
);

ALTER TABLE COMMENTS
ADD CONSTRAINT FK_COMMENTS_ID FOREIGN KEY(ID)
REFERENCES MEMBER(ID);
